import{bB as se,bS as te,bT as le,bz as De,bU as Pe,bV as ve,bW as ie,O as H,bX as Se,m as Te,aH as be,bY as we,aB as Fe,R as oe,b5 as ae,bC as ke}from"./index-ua0-K29W.js";import{$ as ge,a as Ke,e as Re}from"./usePress-BkEZvTzG.js";import{d as Me,c as Le,$ as Be,a as Ae,b as Ne}from"./useCollection-DNGdb5nH.js";import{r as K,e as Ce}from"./react-router-dom-D2nijK8M.js";function ce(o,e){const t=K.useRef(!0),l=K.useRef(null);se(()=>(t.current=!0,()=>{t.current=!1}),[]),se(()=>{t.current?t.current=!1:(!l.current||e.some((i,s)=>!Object.is(i,l[s])))&&o(),l.current=e},e)}function Ee(o,e){const t=[];for(;o&&o!==document.documentElement;)te(o,e)&&t.push(o),o=o.parentElement;return t}function V(o,e,t,l){let i=le(t),s=t==null;K.useEffect(()=>{if(s||!o.current)return;let a=o.current;return a.addEventListener(e,i,l),()=>{a.removeEventListener(e,i,l)}},[o,e,l,s,i])}function $e(o,e){let t=ue(o,e,"left"),l=ue(o,e,"top"),i=e.offsetWidth,s=e.offsetHeight,a=o.scrollLeft,u=o.scrollTop,{borderTopWidth:d,borderLeftWidth:p,scrollPaddingTop:D,scrollPaddingRight:g,scrollPaddingBottom:h,scrollPaddingLeft:m}=getComputedStyle(o),v=a+parseInt(p,10),L=u+parseInt(d,10),S=v+o.clientWidth,y=L+o.clientHeight,M=parseInt(D,10)||0,b=parseInt(h,10)||0,B=parseInt(g,10)||0,x=parseInt(m,10)||0;t<=a+x?a=t-parseInt(p,10)-x:t+i>S-B&&(a+=t+i-S+B),l<=L+M?u=l-parseInt(d,10)-M:l+s>y-b&&(u+=l+s-y+b),o.scrollLeft=a,o.scrollTop=u}function ue(o,e,t){const l=t==="left"?"offsetLeft":"offsetTop";let i=0;for(;e.offsetParent&&(i+=e[l],e.offsetParent!==o);){if(e.offsetParent.contains(o)){i-=o[l];break}e=e.offsetParent}return i}function fe(o,e){if(o&&document.contains(o)){let a=document.scrollingElement||document.documentElement;if(window.getComputedStyle(a).overflow==="hidden"){let d=Ee(o);for(let p of d)$e(p,o)}else{var t;let{left:d,top:p}=o.getBoundingClientRect();o==null||(t=o.scrollIntoView)===null||t===void 0||t.call(o,{block:"nearest"});let{left:D,top:g}=o.getBoundingClientRect();if(Math.abs(d-D)>1||Math.abs(p-g)>1){var l,i,s;e==null||(i=e.containingElement)===null||i===void 0||(l=i.scrollIntoView)===null||l===void 0||l.call(i,{block:"center",inline:"center"}),(s=o.scrollIntoView)===null||s===void 0||s.call(o,{block:"nearest"})}}}}const Oe="react-aria-clear-focus",Ie="react-aria-focus";function z(o){return De()?o.metaKey:o.ctrlKey}const ze=500;function We(o){let{isDisabled:e,onLongPressStart:t,onLongPressEnd:l,onLongPress:i,threshold:s=ze,accessibilityDescription:a}=o;const u=K.useRef(void 0);let{addGlobalListener:d,removeGlobalListener:p}=Pe(),{pressProps:D}=ge({isDisabled:e,onPressStart(h){if(h.continuePropagation(),(h.pointerType==="mouse"||h.pointerType==="touch")&&(t&&t({...h,type:"longpressstart"}),u.current=setTimeout(()=>{h.target.dispatchEvent(new PointerEvent("pointercancel",{bubbles:!0})),ve(h.target).activeElement!==h.target&&ie(h.target),i&&i({...h,type:"longpress"}),u.current=void 0},s),h.pointerType==="touch")){let m=v=>{v.preventDefault()};d(h.target,"contextmenu",m,{once:!0}),d(window,"pointerup",()=>{setTimeout(()=>{p(h.target,"contextmenu",m)},30)},{once:!0})}},onPressEnd(h){u.current&&clearTimeout(u.current),l&&(h.pointerType==="mouse"||h.pointerType==="touch")&&l({...h,type:"longpressend"})}}),g=Me(i&&!e?a:void 0);return{longPressProps:H(D,g)}}function me(o){let e=Ve(ve(o));e!==o&&(e&&He(e,o),o&&Ue(o,e))}function He(o,e){o.dispatchEvent(new FocusEvent("blur",{relatedTarget:e})),o.dispatchEvent(new FocusEvent("focusout",{bubbles:!0,relatedTarget:e}))}function Ue(o,e){o.dispatchEvent(new FocusEvent("focus",{relatedTarget:e})),o.dispatchEvent(new FocusEvent("focusin",{bubbles:!0,relatedTarget:e}))}function Ve(o){let e=Se(o),t=e==null?void 0:e.getAttribute("aria-activedescendant");return t&&o.getElementById(t)||e}var lt=Te({base:"shrink-0 bg-divider border-none",variants:{orientation:{horizontal:"w-full h-divider",vertical:"h-full w-divider"}},defaultVariants:{orientation:"horizontal"}});function re(o){return we()?o.altKey:o.ctrlKey}function Y(o,e){var t,l;let i=`[data-key="${CSS.escape(String(e))}"]`,s=(t=o.current)===null||t===void 0?void 0:t.dataset.collection;return s&&(i=`[data-collection="${CSS.escape(s)}"]${i}`),(l=o.current)===null||l===void 0?void 0:l.querySelector(i)}const xe=new WeakMap;function Ye(o){let e=be();return xe.set(o,e),e}function Xe(o){return xe.get(o)}const Ge=1e3;function je(o){let{keyboardDelegate:e,selectionManager:t,onTypeSelect:l}=o,i=K.useRef({search:"",timeout:void 0}).current,s=a=>{let u=qe(a.key);if(!(!u||a.ctrlKey||a.metaKey||!a.currentTarget.contains(a.target))){if(u===" "&&i.search.trim().length>0&&(a.preventDefault(),"continuePropagation"in a||a.stopPropagation()),i.search+=u,e.getKeyForSearch!=null){let d=e.getKeyForSearch(i.search,t.focusedKey);d==null&&(d=e.getKeyForSearch(i.search)),d!=null&&(t.setFocusedKey(d),l&&l(d))}clearTimeout(i.timeout),i.timeout=setTimeout(()=>{i.search=""},Ge)}};return{typeSelectProps:{onKeyDownCapture:e.getKeyForSearch?s:void 0}}}function qe(o){return o.length===1||!/^[A-Z]/i.test(o)?o:""}function Ze(o){let{selectionManager:e,keyboardDelegate:t,ref:l,autoFocus:i=!1,shouldFocusWrap:s=!1,disallowEmptySelection:a=!1,disallowSelectAll:u=!1,escapeKeyBehavior:d="clearSelection",selectOnFocus:p=e.selectionBehavior==="replace",disallowTypeAhead:D=!1,shouldUseVirtualFocus:g,allowsTabNavigation:h=!1,isVirtualized:m,scrollRef:v=l,linkBehavior:L="action"}=o,{direction:S}=Fe(),y=Ke(),M=n=>{var f;if(n.altKey&&n.key==="Tab"&&n.preventDefault(),!(!((f=l.current)===null||f===void 0)&&f.contains(n.target)))return;const r=(c,O)=>{if(c!=null){if(e.isLink(c)&&L==="selection"&&p&&!re(n)){Ce.flushSync(()=>{e.setFocusedKey(c,O)});let I=Y(l,c),ne=e.getItemProps(c);I&&y.open(I,n,ne.href,ne.routerOptions);return}if(e.setFocusedKey(c,O),e.isLink(c)&&L==="override")return;n.shiftKey&&e.selectionMode==="multiple"?e.extendSelection(c):p&&!re(n)&&e.replaceSelection(c)}};switch(n.key){case"ArrowDown":if(t.getKeyBelow){var $,R,k;let c=e.focusedKey!=null?($=t.getKeyBelow)===null||$===void 0?void 0:$.call(t,e.focusedKey):(R=t.getFirstKey)===null||R===void 0?void 0:R.call(t);c==null&&s&&(c=(k=t.getFirstKey)===null||k===void 0?void 0:k.call(t,e.focusedKey)),c!=null&&(n.preventDefault(),r(c))}break;case"ArrowUp":if(t.getKeyAbove){var N,E,j;let c=e.focusedKey!=null?(N=t.getKeyAbove)===null||N===void 0?void 0:N.call(t,e.focusedKey):(E=t.getLastKey)===null||E===void 0?void 0:E.call(t);c==null&&s&&(c=(j=t.getLastKey)===null||j===void 0?void 0:j.call(t,e.focusedKey)),c!=null&&(n.preventDefault(),r(c))}break;case"ArrowLeft":if(t.getKeyLeftOf){var q,Z,J;let c=e.focusedKey!=null?(q=t.getKeyLeftOf)===null||q===void 0?void 0:q.call(t,e.focusedKey):null;c==null&&s&&(c=S==="rtl"?(Z=t.getFirstKey)===null||Z===void 0?void 0:Z.call(t,e.focusedKey):(J=t.getLastKey)===null||J===void 0?void 0:J.call(t,e.focusedKey)),c!=null&&(n.preventDefault(),r(c,S==="rtl"?"first":"last"))}break;case"ArrowRight":if(t.getKeyRightOf){var Q,_,ee;let c=e.focusedKey!=null?(Q=t.getKeyRightOf)===null||Q===void 0?void 0:Q.call(t,e.focusedKey):null;c==null&&s&&(c=S==="rtl"?(_=t.getLastKey)===null||_===void 0?void 0:_.call(t,e.focusedKey):(ee=t.getFirstKey)===null||ee===void 0?void 0:ee.call(t,e.focusedKey)),c!=null&&(n.preventDefault(),r(c,S==="rtl"?"last":"first"))}break;case"Home":if(t.getFirstKey){if(e.focusedKey===null&&n.shiftKey)return;n.preventDefault();let c=t.getFirstKey(e.focusedKey,z(n));e.setFocusedKey(c),c!=null&&(z(n)&&n.shiftKey&&e.selectionMode==="multiple"?e.extendSelection(c):p&&e.replaceSelection(c))}break;case"End":if(t.getLastKey){if(e.focusedKey===null&&n.shiftKey)return;n.preventDefault();let c=t.getLastKey(e.focusedKey,z(n));e.setFocusedKey(c),c!=null&&(z(n)&&n.shiftKey&&e.selectionMode==="multiple"?e.extendSelection(c):p&&e.replaceSelection(c))}break;case"PageDown":if(t.getKeyPageBelow&&e.focusedKey!=null){let c=t.getKeyPageBelow(e.focusedKey);c!=null&&(n.preventDefault(),r(c))}break;case"PageUp":if(t.getKeyPageAbove&&e.focusedKey!=null){let c=t.getKeyPageAbove(e.focusedKey);c!=null&&(n.preventDefault(),r(c))}break;case"a":z(n)&&e.selectionMode==="multiple"&&u!==!0&&(n.preventDefault(),e.selectAll());break;case"Escape":d==="clearSelection"&&!a&&e.selectedKeys.size!==0&&(n.stopPropagation(),n.preventDefault(),e.clearSelection());break;case"Tab":if(!h){if(n.shiftKey)l.current.focus();else{let c=ke(l.current,{tabbable:!0}),O,I;do I=c.lastChild(),I&&(O=I);while(I);O&&!O.contains(document.activeElement)&&ie(O)}break}}},b=K.useRef({top:0,left:0});V(v,"scroll",m?void 0:()=>{var n,f,r,$;b.current={top:(r=(n=v.current)===null||n===void 0?void 0:n.scrollTop)!==null&&r!==void 0?r:0,left:($=(f=v.current)===null||f===void 0?void 0:f.scrollLeft)!==null&&$!==void 0?$:0}});let B=n=>{if(e.isFocused){n.currentTarget.contains(n.target)||e.setFocused(!1);return}if(n.currentTarget.contains(n.target)){if(e.setFocused(!0),e.focusedKey==null){var f,r;let k=E=>{E!=null&&(e.setFocusedKey(E),p&&!e.isSelected(E)&&e.replaceSelection(E))},N=n.relatedTarget;var $,R;N&&n.currentTarget.compareDocumentPosition(N)&Node.DOCUMENT_POSITION_FOLLOWING?k(($=e.lastSelectedKey)!==null&&$!==void 0?$:(f=t.getLastKey)===null||f===void 0?void 0:f.call(t)):k((R=e.firstSelectedKey)!==null&&R!==void 0?R:(r=t.getFirstKey)===null||r===void 0?void 0:r.call(t))}else!m&&v.current&&(v.current.scrollTop=b.current.top,v.current.scrollLeft=b.current.left);if(e.focusedKey!=null&&v.current){let k=Y(l,e.focusedKey);k instanceof HTMLElement&&(!k.contains(document.activeElement)&&!g&&ie(k),ae()==="keyboard"&&fe(k,{containingElement:l.current}))}}},x=n=>{n.currentTarget.contains(n.relatedTarget)||e.setFocused(!1)},T=K.useRef(!1);V(l,Ie,g?n=>{let{detail:f}=n;n.stopPropagation(),e.setFocused(!0),(f==null?void 0:f.focusStrategy)==="first"&&(T.current=!0)}:void 0);let A=le(()=>{var n,f;let r=(f=(n=t.getFirstKey)===null||n===void 0?void 0:n.call(t))!==null&&f!==void 0?f:null;r==null?(me(l.current),e.collection.size>0&&(T.current=!1)):(e.setFocusedKey(r),T.current=!1)});ce(()=>{T.current&&A()},[e.collection,A]);let w=le(()=>{e.collection.size>0&&(T.current=!1)});ce(()=>{w()},[e.focusedKey,w]),V(l,Oe,g?n=>{var f;n.stopPropagation(),e.setFocused(!1),!((f=n.detail)===null||f===void 0)&&f.clearFocusKey&&e.setFocusedKey(null)}:void 0);const P=K.useRef(i),C=K.useRef(!1);K.useEffect(()=>{if(P.current){var n,f;let R=null;var r;i==="first"&&(R=(r=(n=t.getFirstKey)===null||n===void 0?void 0:n.call(t))!==null&&r!==void 0?r:null);var $;i==="last"&&(R=($=(f=t.getLastKey)===null||f===void 0?void 0:f.call(t))!==null&&$!==void 0?$:null);let k=e.selectedKeys;if(k.size){for(let N of k)if(e.canSelectItem(N)){R=N;break}}e.setFocused(!0),e.setFocusedKey(R),R==null&&!g&&l.current&&oe(l.current),e.collection.size>0&&(P.current=!1,C.current=!0)}});let F=K.useRef(e.focusedKey);K.useEffect(()=>{if(e.isFocused&&e.focusedKey!=null&&(e.focusedKey!==F.current||C.current)&&v.current&&l.current){let n=ae(),f=Y(l,e.focusedKey);if(!(f instanceof HTMLElement))return;(n==="keyboard"||C.current)&&($e(v.current,f),n!=="virtual"&&fe(f,{containingElement:l.current}))}!g&&e.isFocused&&e.focusedKey==null&&F.current!=null&&l.current&&oe(l.current),F.current=e.focusedKey,C.current=!1}),V(l,"react-aria-focus-scope-restore",n=>{n.preventDefault(),e.setFocused(!0)});let W={onKeyDown:M,onFocus:B,onBlur:x,onMouseDown(n){v.current===n.target&&n.preventDefault()}},{typeSelectProps:X}=je({keyboardDelegate:t,selectionManager:e});D||(W=H(X,W));let U;g||(U=e.focusedKey==null?0:-1);let G=Ye(e.collection);return{collectionProps:H(W,{tabIndex:U,"data-collection":G})}}function it(o){let{id:e,selectionManager:t,key:l,ref:i,shouldSelectOnPressUp:s,shouldUseVirtualFocus:a,focus:u,isDisabled:d,onAction:p,allowsDifferentPressOrigin:D,linkBehavior:g="action"}=o,h=Ke();e=be(e);let m=r=>{if(r.pointerType==="keyboard"&&re(r))t.toggleSelection(l);else{if(t.selectionMode==="none")return;if(t.isLink(l)){if(g==="selection"&&i.current){let $=t.getItemProps(l);h.open(i.current,r,$.href,$.routerOptions),t.setSelectedKeys(t.selectedKeys);return}else if(g==="override"||g==="none")return}t.selectionMode==="single"?t.isSelected(l)&&!t.disallowEmptySelection?t.toggleSelection(l):t.replaceSelection(l):r&&r.shiftKey?t.extendSelection(l):t.selectionBehavior==="toggle"||r&&(z(r)||r.pointerType==="touch"||r.pointerType==="virtual")?t.toggleSelection(l):t.replaceSelection(l)}};K.useEffect(()=>{l===t.focusedKey&&t.isFocused&&(a?me(i.current):u?u():document.activeElement!==i.current&&i.current&&oe(i.current))},[i,l,t.focusedKey,t.childFocusStrategy,t.isFocused,a]),d=d||t.isDisabled(l);let v={};!a&&!d?v={tabIndex:l===t.focusedKey?0:-1,onFocus(r){r.target===i.current&&t.setFocusedKey(l)}}:d&&(v.onMouseDown=r=>{r.preventDefault()});let L=t.isLink(l)&&g==="override",S=t.isLink(l)&&g!=="selection"&&g!=="none",y=!d&&t.canSelectItem(l)&&!L,M=(p||S)&&!d,b=M&&(t.selectionBehavior==="replace"?!y:!y||t.isEmpty),B=M&&y&&t.selectionBehavior==="replace",x=b||B,T=K.useRef(null),A=x&&y,w=K.useRef(!1),P=K.useRef(!1),C=r=>{if(p&&p(),S&&i.current){let $=t.getItemProps(l);h.open(i.current,r,$.href,$.routerOptions)}},F={ref:i};s?(F.onPressStart=r=>{T.current=r.pointerType,w.current=A,r.pointerType==="keyboard"&&(!x||ye())&&m(r)},D?(F.onPressUp=b?void 0:r=>{r.pointerType==="mouse"&&y&&m(r)},F.onPress=b?C:r=>{r.pointerType!=="keyboard"&&r.pointerType!=="mouse"&&y&&m(r)}):F.onPress=r=>{if(b||B&&r.pointerType!=="mouse"){if(r.pointerType==="keyboard"&&!de())return;C(r)}else r.pointerType!=="keyboard"&&y&&m(r)}):(F.onPressStart=r=>{T.current=r.pointerType,w.current=A,P.current=b,y&&(r.pointerType==="mouse"&&!b||r.pointerType==="keyboard"&&(!M||ye()))&&m(r)},F.onPress=r=>{(r.pointerType==="touch"||r.pointerType==="pen"||r.pointerType==="virtual"||r.pointerType==="keyboard"&&x&&de()||r.pointerType==="mouse"&&P.current)&&(x?C(r):y&&m(r))}),v["data-collection"]=Xe(t.collection),v["data-key"]=l,F.preventFocusOnPress=a,a&&(F=H(F,{onPressStart(r){r.pointerType!=="touch"&&(t.setFocused(!0),t.setFocusedKey(l))},onPress(r){r.pointerType==="touch"&&(t.setFocused(!0),t.setFocusedKey(l))}}));let{pressProps:W,isPressed:X}=ge(F),U=B?r=>{T.current==="mouse"&&(r.stopPropagation(),r.preventDefault(),C(r))}:void 0,{longPressProps:G}=We({isDisabled:!A,onLongPress(r){r.pointerType==="touch"&&(m(r),t.setSelectionBehavior("toggle"))}}),n=r=>{T.current==="touch"&&w.current&&r.preventDefault()},f=t.isLink(l)?r=>{Re.isOpening||r.preventDefault()}:void 0;return{itemProps:H(v,y||b||a?W:{},A?G:{},{onDoubleClick:U,onDragStartCapture:n,onClick:f,id:e},a?{onMouseDown:r=>r.preventDefault()}:void 0),isPressed:X,isSelected:t.isSelected(l),isFocused:t.isFocused&&t.focusedKey===l,isDisabled:d,allowsSelection:y,hasAction:x}}function de(){let o=window.event;return(o==null?void 0:o.key)==="Enter"}function ye(){let o=window.event;return(o==null?void 0:o.key)===" "||(o==null?void 0:o.code)==="Space"}class he{getItemRect(e){let t=this.ref.current;if(!t)return null;let l=e!=null?Y(this.ref,e):null;if(!l)return null;let i=t.getBoundingClientRect(),s=l.getBoundingClientRect();return{x:s.left-i.left+t.scrollLeft,y:s.top-i.top+t.scrollTop,width:s.width,height:s.height}}getContentSize(){let e=this.ref.current;var t,l;return{width:(t=e==null?void 0:e.scrollWidth)!==null&&t!==void 0?t:0,height:(l=e==null?void 0:e.scrollHeight)!==null&&l!==void 0?l:0}}getVisibleRect(){let e=this.ref.current;var t,l,i,s;return{x:(t=e==null?void 0:e.scrollLeft)!==null&&t!==void 0?t:0,y:(l=e==null?void 0:e.scrollTop)!==null&&l!==void 0?l:0,width:(i=e==null?void 0:e.offsetWidth)!==null&&i!==void 0?i:0,height:(s=e==null?void 0:e.offsetHeight)!==null&&s!==void 0?s:0}}constructor(e){this.ref=e}}class Je{isDisabled(e){var t;return this.disabledBehavior==="all"&&(((t=e.props)===null||t===void 0?void 0:t.isDisabled)||this.disabledKeys.has(e.key))}findNextNonDisabled(e,t){let l=e;for(;l!=null;){let i=this.collection.getItem(l);if((i==null?void 0:i.type)==="item"&&!this.isDisabled(i))return l;l=t(l)}return null}getNextKey(e){let t=e;return t=this.collection.getKeyAfter(t),this.findNextNonDisabled(t,l=>this.collection.getKeyAfter(l))}getPreviousKey(e){let t=e;return t=this.collection.getKeyBefore(t),this.findNextNonDisabled(t,l=>this.collection.getKeyBefore(l))}findKey(e,t,l){let i=e,s=this.layoutDelegate.getItemRect(i);if(!s||i==null)return null;let a=s;do{if(i=t(i),i==null)break;s=this.layoutDelegate.getItemRect(i)}while(s&&l(a,s)&&i!=null);return i}isSameRow(e,t){return e.y===t.y||e.x!==t.x}isSameColumn(e,t){return e.x===t.x||e.y!==t.y}getKeyBelow(e){return this.layout==="grid"&&this.orientation==="vertical"?this.findKey(e,t=>this.getNextKey(t),this.isSameRow):this.getNextKey(e)}getKeyAbove(e){return this.layout==="grid"&&this.orientation==="vertical"?this.findKey(e,t=>this.getPreviousKey(t),this.isSameRow):this.getPreviousKey(e)}getNextColumn(e,t){return t?this.getPreviousKey(e):this.getNextKey(e)}getKeyRightOf(e){let t=this.direction==="ltr"?"getKeyRightOf":"getKeyLeftOf";return this.layoutDelegate[t]?(e=this.layoutDelegate[t](e),this.findNextNonDisabled(e,l=>this.layoutDelegate[t](l))):this.layout==="grid"?this.orientation==="vertical"?this.getNextColumn(e,this.direction==="rtl"):this.findKey(e,l=>this.getNextColumn(l,this.direction==="rtl"),this.isSameColumn):this.orientation==="horizontal"?this.getNextColumn(e,this.direction==="rtl"):null}getKeyLeftOf(e){let t=this.direction==="ltr"?"getKeyLeftOf":"getKeyRightOf";return this.layoutDelegate[t]?(e=this.layoutDelegate[t](e),this.findNextNonDisabled(e,l=>this.layoutDelegate[t](l))):this.layout==="grid"?this.orientation==="vertical"?this.getNextColumn(e,this.direction==="ltr"):this.findKey(e,l=>this.getNextColumn(l,this.direction==="ltr"),this.isSameColumn):this.orientation==="horizontal"?this.getNextColumn(e,this.direction==="ltr"):null}getFirstKey(){let e=this.collection.getFirstKey();return this.findNextNonDisabled(e,t=>this.collection.getKeyAfter(t))}getLastKey(){let e=this.collection.getLastKey();return this.findNextNonDisabled(e,t=>this.collection.getKeyBefore(t))}getKeyPageAbove(e){let t=this.ref.current,l=this.layoutDelegate.getItemRect(e);if(!l)return null;if(t&&!te(t))return this.getFirstKey();let i=e;if(this.orientation==="horizontal"){let s=Math.max(0,l.x+l.width-this.layoutDelegate.getVisibleRect().width);for(;l&&l.x>s&&i!=null;)i=this.getKeyAbove(i),l=i==null?null:this.layoutDelegate.getItemRect(i)}else{let s=Math.max(0,l.y+l.height-this.layoutDelegate.getVisibleRect().height);for(;l&&l.y>s&&i!=null;)i=this.getKeyAbove(i),l=i==null?null:this.layoutDelegate.getItemRect(i)}return i??this.getFirstKey()}getKeyPageBelow(e){let t=this.ref.current,l=this.layoutDelegate.getItemRect(e);if(!l)return null;if(t&&!te(t))return this.getLastKey();let i=e;if(this.orientation==="horizontal"){let s=Math.min(this.layoutDelegate.getContentSize().width,l.y-l.width+this.layoutDelegate.getVisibleRect().width);for(;l&&l.x<s&&i!=null;)i=this.getKeyBelow(i),l=i==null?null:this.layoutDelegate.getItemRect(i)}else{let s=Math.min(this.layoutDelegate.getContentSize().height,l.y-l.height+this.layoutDelegate.getVisibleRect().height);for(;l&&l.y<s&&i!=null;)i=this.getKeyBelow(i),l=i==null?null:this.layoutDelegate.getItemRect(i)}return i??this.getLastKey()}getKeyForSearch(e,t){if(!this.collator)return null;let l=this.collection,i=t||this.getFirstKey();for(;i!=null;){let s=l.getItem(i);if(!s)return null;let a=s.textValue.slice(0,e.length);if(s.textValue&&this.collator.compare(a,e)===0)return i;i=this.getNextKey(i)}return null}constructor(...e){if(e.length===1){let t=e[0];this.collection=t.collection,this.ref=t.ref,this.collator=t.collator,this.disabledKeys=t.disabledKeys||new Set,this.disabledBehavior=t.disabledBehavior||"all",this.orientation=t.orientation||"vertical",this.direction=t.direction,this.layout=t.layout||"stack",this.layoutDelegate=t.layoutDelegate||new he(t.ref)}else this.collection=e[0],this.disabledKeys=e[1],this.ref=e[2],this.collator=e[3],this.layout="stack",this.orientation="vertical",this.disabledBehavior="all",this.layoutDelegate=new he(this.ref);this.layout==="stack"&&this.orientation==="vertical"&&(this.getKeyLeftOf=void 0,this.getKeyRightOf=void 0)}}function ot(o){let{selectionManager:e,collection:t,disabledKeys:l,ref:i,keyboardDelegate:s,layoutDelegate:a}=o,u=Le({usage:"search",sensitivity:"base"}),d=e.disabledBehavior,p=K.useMemo(()=>s||new Je({collection:t,disabledKeys:l,disabledBehavior:d,ref:i,collator:u,layoutDelegate:a}),[s,a,t,l,i,u,d]),{collectionProps:D}=Ze({...o,ref:i,selectionManager:e,keyboardDelegate:p});return{listProps:D}}class pe{*[Symbol.iterator](){yield*this.iterable}get size(){return this.keyMap.size}getKeys(){return this.keyMap.keys()}getKeyBefore(e){let t=this.keyMap.get(e);var l;return t&&(l=t.prevKey)!==null&&l!==void 0?l:null}getKeyAfter(e){let t=this.keyMap.get(e);var l;return t&&(l=t.nextKey)!==null&&l!==void 0?l:null}getFirstKey(){return this.firstKey}getLastKey(){return this.lastKey}getItem(e){var t;return(t=this.keyMap.get(e))!==null&&t!==void 0?t:null}at(e){const t=[...this.getKeys()];return this.getItem(t[e])}getChildren(e){let t=this.keyMap.get(e);return(t==null?void 0:t.childNodes)||[]}constructor(e){this.keyMap=new Map,this.firstKey=null,this.lastKey=null,this.iterable=e;let t=a=>{if(this.keyMap.set(a.key,a),a.childNodes&&a.type==="section")for(let u of a.childNodes)t(u)};for(let a of e)t(a);let l=null,i=0;for(let[a,u]of this.keyMap)l?(l.nextKey=a,u.prevKey=l.key):(this.firstKey=a,u.prevKey=void 0),u.type==="item"&&(u.index=i++),l=u,l.nextKey=void 0;var s;this.lastKey=(s=l==null?void 0:l.key)!==null&&s!==void 0?s:null}}function rt(o){let{filter:e,layoutDelegate:t}=o,l=Be(o),i=K.useMemo(()=>o.disabledKeys?new Set(o.disabledKeys):new Set,[o.disabledKeys]),s=K.useCallback(D=>e?new pe(e(D)):new pe(D),[e]),a=K.useMemo(()=>({suppressTextValueWarning:o.suppressTextValueWarning}),[o.suppressTextValueWarning]),u=Ae(o,s,a),d=K.useMemo(()=>new Ne(u,l,{layoutDelegate:t}),[u,l,t]);const p=K.useRef(null);return K.useEffect(()=>{if(l.focusedKey!=null&&!u.getItem(l.focusedKey)&&p.current){const y=p.current.getItem(l.focusedKey),M=[...p.current.getKeys()].map(w=>{const P=p.current.getItem(w);return(P==null?void 0:P.type)==="item"?P:null}).filter(w=>w!==null),b=[...u.getKeys()].map(w=>{const P=u.getItem(w);return(P==null?void 0:P.type)==="item"?P:null}).filter(w=>w!==null);var D,g;const B=((D=M==null?void 0:M.length)!==null&&D!==void 0?D:0)-((g=b==null?void 0:b.length)!==null&&g!==void 0?g:0);var h,m,v;let x=Math.min(B>1?Math.max(((h=y==null?void 0:y.index)!==null&&h!==void 0?h:0)-B+1,0):(m=y==null?void 0:y.index)!==null&&m!==void 0?m:0,((v=b==null?void 0:b.length)!==null&&v!==void 0?v:0)-1),T=null,A=!1;for(;x>=0;){if(!d.isDisabled(b[x].key)){T=b[x];break}if(x<b.length-1&&!A)x++;else{A=!0;var L,S;x>((L=y==null?void 0:y.index)!==null&&L!==void 0?L:0)&&(x=(S=y==null?void 0:y.index)!==null&&S!==void 0?S:0),x--}}l.setFocusedKey(T?T.key:null)}p.current=u},[u,d,l,l.focusedKey]),{collection:u,disabledKeys:i,selectionManager:d}}export{ot as $,it as a,rt as b,We as c,lt as d,Ze as e};
